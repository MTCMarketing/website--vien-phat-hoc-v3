{"version":3,"file":"component---src-pages-auth-verify-tsx-aee29e42087b35e8585f.js","mappings":"qMAuEA,MA1DoEA,IAM7D,IAN8D,MACjEC,EAAK,MACLC,EAAK,YACLC,EAAW,YACXC,EAAW,SACXC,GACHL,EACG,OACIM,EAAAA,cAAA,OAAKC,UAAU,kBACXD,EAAAA,cAAA,OAAKC,UAAU,eACXD,EAAAA,cAAA,OAAKC,UAAU,0BACC,YAAVN,GAAiC,cAAVA,GAAmC,eAAVA,IAC9CK,EAAAA,cAAA,OAAKC,UAAU,mBAGR,YAAVN,GACGK,EAAAA,cAAA,OAAKC,UAAU,8BACXD,EAAAA,cAAA,OAAKE,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAYC,KAAK,OAAOC,OAAO,eAAeC,YAAY,IAAIC,cAAc,QAAQC,eAAe,SACnIT,EAAAA,cAAA,YAAUU,OAAO,qBAKlB,YAAVf,GACGK,EAAAA,cAAA,OAAKC,UAAU,4BACXD,EAAAA,cAAA,OAAKE,MAAM,KAAKC,OAAO,KAAKC,QAAQ,YAAYC,KAAK,OAAOC,OAAO,eAAeC,YAAY,IAAIC,cAAc,QAAQC,eAAe,SACnIT,EAAAA,cAAA,QAAMW,GAAG,KAAKC,GAAG,IAAIC,GAAG,IAAIC,GAAG,OAC/Bd,EAAAA,cAAA,QAAMW,GAAG,IAAIC,GAAG,IAAIC,GAAG,KAAKC,GAAG,UAM/Cd,EAAAA,cAAA,MAAIC,UAAU,gBAAgBL,GAC9BI,EAAAA,cAAA,KAAGC,UAAU,sBAAsBJ,GAExB,YAAVF,GAAuBG,GACpBE,EAAAA,cAAA,UAAQC,UAAU,oBAAoBc,QAAShB,GAC1CD,GAIE,YAAVH,GACGK,EAAAA,cAAA,KAAGgB,KAAK,SAASf,UAAU,oBAAoBgB,MAAO,CAAEC,WAAY,UAAWC,MAAO,YAAa,kBAK3F,YAAVxB,GAAiC,YAAVA,IACrBK,EAAAA,cAAA,KAAGgB,KAAK,IAAIf,UAAU,yBAAwB,iBCkBlE,MA7EmBmB,KACf,MAAM,EAACzB,EAAK,EAAE0B,IAAYC,EAAAA,EAAAA,UAAsB,YAC1C,EAAC1B,EAAK,EAAE2B,IAAYD,EAAAA,EAAAA,UAAS,eAC7B,EAACzB,EAAW,EAAE2B,IAAkBF,EAAAA,EAAAA,UAAS,wCACzC,EAACxB,EAAW,EAAE2B,IAAkBH,EAAAA,EAAAA,aAEtCI,EAAAA,EAAAA,WAAU,KAEN,GAAsB,oBAAXC,OAAwB,OAEnC,MAAMC,EAAS,IAAIC,gBAAgBF,OAAOG,SAASC,QAC7CC,EAAOJ,EAAOK,IAAI,QAClBC,EAAQN,EAAOK,IAAI,SAEDE,WAEpB,IAAKH,IAASE,EAIV,OAHAb,EAAS,WACTE,EAAS,qBACTC,EAAe,iFAKnBH,EAAS,aACTE,EAAS,qBACTC,EAAe,yCAEfY,QAAQC,IAAI,0BAA0BL,EAAI,eAAeE,SACnD,IAAII,QAAQC,GAAWC,WAAWD,EAAS,MAGnC,mBAAVL,GACAb,EAAS,cACTE,EAAS,uBACTC,EAAe,kDACT,IAAIc,QAAQC,GAAWC,WAAWD,EAAS,OAEjDlB,EAAS,WACTE,EAAS,2BACTC,EAAe,+DACfC,EAAe,sBAGfJ,EAAS,WACTE,EAAS,qBACTC,EAAe,qCAAqCU,EAAMO,QAAQ,IAAK,KAAI,KAC3EhB,EAAe,cAIvBiB,IACD,IAcH,OACI1C,EAAAA,cAAC2C,EAAqB,CAClBhD,MAAOA,EACPC,MAAOA,EACPC,YAAaA,EACbC,YAAaA,EACbC,SAlBa6C,KACjBR,QAAQC,IAAI,sEACZ,MACMH,EADS,IAAIL,gBAAgBF,OAAOG,SAASC,QAC9BE,IAAI,SAGrBN,OAAOG,SAASd,KADN,mBAAVkB,EACuB,oBAEA,Y","sources":["webpack://gatsby-starter-minimal-ts/./src/components/templates/DefaultVerifyTemplate.tsx","webpack://gatsby-starter-minimal-ts/./src/pages/auth/verify.tsx"],"sourcesContent":["import React from \"react\";\nimport \"./DefaultVerifyTemplate.css\";\n\nexport type VerifyState = 'loading' | 'verifying' | 'processing' | 'success' | 'failure';\n\nexport interface DefaultVerifyTemplateProps {\n    state: VerifyState;\n    title: string;\n    description: string;\n    actionLabel?: string;\n    onAction?: () => void;\n}\n\nconst DefaultVerifyTemplate: React.FC<DefaultVerifyTemplateProps> = ({\n    state,\n    title,\n    description,\n    actionLabel,\n    onAction\n}) => {\n    return (\n        <div className=\"verify-wrapper\">\n            <div className=\"verify-card\">\n                <div className=\"verify-icon-container\">\n                    {(state === 'loading' || state === 'verifying' || state === 'processing') && (\n                        <div className=\"verify-spinner\"></div>\n                    )}\n\n                    {state === 'success' && (\n                        <div className=\"verify-status-icon success\">\n                            <svg width=\"32\" height=\"32\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"3\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n                                <polyline points=\"20 6 9 17 4 12\" />\n                            </svg>\n                        </div>\n                    )}\n\n                    {state === 'failure' && (\n                        <div className=\"verify-status-icon error\">\n                            <svg width=\"32\" height=\"32\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"3\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n                                <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\n                                <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\n                            </svg>\n                        </div>\n                    )}\n                </div>\n\n                <h1 className=\"verify-title\">{title}</h1>\n                <p className=\"verify-description\">{description}</p>\n\n                {state === 'success' && actionLabel && (\n                    <button className=\"verify-action-btn\" onClick={onAction}>\n                        {actionLabel}\n                    </button>\n                )}\n\n                {state === 'failure' && (\n                    <a href=\"/login\" className=\"verify-action-btn\" style={{ background: '#f3f4f6', color: '#374151' }}>\n                        Back to Login\n                    </a>\n                )}\n\n                {(state === 'success' || state === 'failure') && (\n                    <a href=\"/\" className=\"verify-secondary-link\">\n                        Go to Home\n                    </a>\n                )}\n            </div>\n        </div>\n    );\n};\n\nexport default DefaultVerifyTemplate;\n","import React, { useEffect, useState } from \"react\";\nimport DefaultVerifyTemplate, { VerifyState } from \"../../components/templates/DefaultVerifyTemplate\";\n\nconst VerifyPage = () => {\n    const [state, setState] = useState<VerifyState>('loading');\n    const [title, setTitle] = useState(\"Loading...\");\n    const [description, setDescription] = useState(\"Please wait while we load the page.\");\n    const [actionLabel, setActionLabel] = useState<string | undefined>();\n\n    useEffect(() => {\n        // Accessing window location in a Gatsby/React environment safely\n        if (typeof window === 'undefined') return;\n\n        const params = new URLSearchParams(window.location.search);\n        const code = params.get('code');\n        const event = params.get('event');\n\n        const runVerification = async () => {\n            // Early exit if no code or event\n            if (!code || !event) {\n                setState('failure');\n                setTitle(\"Invalid Link\");\n                setDescription(\"The verification link you used is incomplete or missing required information.\");\n                return;\n            }\n\n            // Phase 1: Checking token\n            setState('verifying');\n            setTitle(\"Checking token...\");\n            setDescription(\"Verifying your identity, please wait.\");\n\n            console.log(`[Auth] Verifying code: ${code} for event: ${event}`);\n            await new Promise(resolve => setTimeout(resolve, 2000));\n\n            // Phase 2: Processing specific event\n            if (event === 'password_reset') {\n                setState('processing');\n                setTitle(\"Processing reset...\");\n                setDescription(\"Preparing your password reset session...\");\n                await new Promise(resolve => setTimeout(resolve, 1500));\n\n                setState('success');\n                setTitle(\"Verification successful\");\n                setDescription(\"You may now proceed to set a new password for your account.\");\n                setActionLabel(\"Set new password\");\n            } else {\n                // Handle generic success for other future events\n                setState('success');\n                setTitle(\"Identity Verified\");\n                setDescription(`Successfully verified action for: ${event.replace('_', ' ')}.`);\n                setActionLabel(\"Continue\");\n            }\n        };\n\n        runVerification();\n    }, []);\n\n    const handleAction = () => {\n        console.log(\"[Auth] User clicked action button. Navigating to appropriate flow.\");\n        const params = new URLSearchParams(window.location.search);\n        const event = params.get('event');\n\n        if (event === 'password_reset') {\n            window.location.href = '/set-new-password';\n        } else {\n            window.location.href = '/login';\n        }\n    };\n\n    return (\n        <DefaultVerifyTemplate\n            state={state}\n            title={title}\n            description={description}\n            actionLabel={actionLabel}\n            onAction={handleAction}\n        />\n    );\n};\n\nexport default VerifyPage;\n"],"names":["_ref","state","title","description","actionLabel","onAction","React","className","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","points","x1","y1","x2","y2","onClick","href","style","background","color","VerifyPage","setState","useState","setTitle","setDescription","setActionLabel","useEffect","window","params","URLSearchParams","location","search","code","get","event","async","console","log","Promise","resolve","setTimeout","replace","runVerification","DefaultVerifyTemplate","handleAction"],"sourceRoot":""}