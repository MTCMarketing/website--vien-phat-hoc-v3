{"version":3,"file":"component---src-pages-test-login-tsx-c296dd633f3f16fe0a57.js","mappings":"6OAGA,cAAqBA,EAAAA,cAACC,EAAAA,EAAW,M,0ICClB,SAASC,IACtB,MAAM,EAACC,EAAO,EAACC,IAAaC,EAAAA,EAAAA,UAAS,KAC/B,EAACC,EAAS,EAACC,IAAeF,EAAAA,EAAAA,UAAS,KACnC,EAACG,EAAK,EAACC,IAAWJ,EAAAA,EAAAA,UAAc,OAChC,EAACK,EAAM,EAACC,IAAYN,EAAAA,EAAAA,UAAwB,OAGpDO,EAAAA,EAAAA,WAAU,KACR,IAAIC,GAAU,EAEDC,WACX,MAAM,KAAEC,SAAeC,EAAAA,GAASC,KAAKC,aAIvB,IAADC,EAAAC,GAFbC,QAAQC,IAAI,mBAAoBP,EAAKQ,SAEjCV,IACFJ,EAA0B,QAAnBU,EAAa,QAAbC,EAACL,EAAKQ,eAAO,IAAAH,OAAA,EAAZA,EAAcZ,YAAI,IAAAW,EAAAA,EAAI,OAIlCK,GAEA,MAAQT,KAAMU,GAAQT,EAAAA,GAASC,KAAKS,kBAClC,CAACC,EAAOJ,KAAa,IAADK,EAClBP,QAAQC,IAAI,cAAeK,GAO3BlB,EALc,eAAVkB,GAKiB,QAAdC,EAACL,aAAO,EAAPA,EAASf,YAAI,IAAAoB,EAAAA,EAJX,QAQd,MAAO,KACLf,GAAU,EACVY,EAAII,aAAaC,gBAElB,IAGD,MAeIC,EAASjB,UACbO,QAAQC,IAAI,kBAEZ,MAAM,MAAEZ,SAAgBM,EAAAA,GAASC,KAAKe,UAElCtB,EACFW,QAAQX,MAAM,gBAAiBA,GAKjCD,EAAQ,OAMR,OAAID,EAEAR,EAAAA,cAAA,OAAKiC,MAAO,CAAEC,QAAS,KACrBlC,EAAAA,cAAA,UAAI,aACJA,EAAAA,cAAA,WAAMQ,EAAK2B,OAEXnC,EAAAA,cAAA,UAAQoC,QAASL,GAAQ,UAIxBrB,GAASV,EAAAA,cAAA,KAAGiC,MAAO,CAAEI,MAAO,QAAU3B,IAO3CV,EAAAA,cAAA,OAAKiC,MAAO,CAAEC,QAAS,KACrBlC,EAAAA,cAAA,UAAI,mBAEHU,GAASV,EAAAA,cAAA,KAAGiC,MAAO,CAAEI,MAAO,QAAU3B,GAEvCV,EAAAA,cAACsC,EAAU,CACTH,MAAOhC,EACPoC,SAAUnC,EACVE,SAAUA,EACVC,YAAaA,EACbiC,MA3DQ1B,UACZH,EAAS,MACTU,QAAQC,IAAI,iBAAkBa,GAE9B,MAAM,KAAEpB,EAAI,MAAEL,SAAgBM,EAAAA,GAASC,KAAKwB,mBAAmB,CAC7DN,QACA7B,aAGFe,QAAQC,IAAI,gBAAiBP,EAAML,GAE/BA,GAAOC,EAASD,EAAMgC,YAqD9B,C,4BAGO,MAAMJ,EAAaK,IAMd,IANe,MACzBR,EAAK,SACLI,EAAQ,SACRjC,EAAQ,YACRC,EAAW,MACXiC,GACIG,EACJ,OACE3C,EAAAA,cAAA,OAAKiC,MAAO,CAAEW,aAAc,KAC1B5C,EAAAA,cAAA,SACE6C,YAAY,QACZC,MAAOX,EACPY,SAAWC,GAAMT,EAASS,EAAEC,OAAOH,SAErC9C,EAAAA,cAAA,WAEAA,EAAAA,cAAA,SACE6C,YAAY,WACZK,KAAK,WACLJ,MAAOxC,EACPyC,SAAWC,GAAMzC,EAAYyC,EAAEC,OAAOH,SAExC9C,EAAAA,cAAA,WAEAA,EAAAA,cAAA,UAAQoC,QAASA,IAAMI,EAAML,IAAQ,W","sources":["webpack://gatsby-starter-minimal-ts/./src/pages/test/login.tsx","webpack://gatsby-starter-minimal-ts/./src/components/ppm/supabase-react/test-auth/SimpleLogin.tsx"],"sourcesContent":["\nimport React from \"react\";\nimport SimpleLogin from \"../../components/ppm/supabase-react/test-auth/SimpleLogin\";\nexport default () => <SimpleLogin/>\n","import { useEffect, useState } from 'react'\nimport { supabase } from '../../../../database/supabase'\nimport React from 'react'\n\nexport default function TestAuth() {\n  const [email1, setEmail1] = useState('')\n  const [password, setPassword] = useState('')\n  const [user, setUser] = useState<any>(null)\n  const [error, setError] = useState<string | null>(null)\n\n  // ---- AUTH STATE LISTENER ----\nuseEffect(() => {\n  let mounted = true\n\n  const init = async () => {\n    const { data } = await supabase.auth.getSession()\n\n    console.log('Initial session:', data.session)\n\n    if (mounted) {\n      setUser(data.session?.user ?? null)\n    }\n  }\n\n  init()\n\n  const { data: sub } = supabase.auth.onAuthStateChange(\n    (event, session) => {\n      console.log('Auth event:', event)\n\n      if (event === 'SIGNED_OUT') {\n        setUser(null)\n        return\n      }\n\n      setUser(session?.user ?? null)\n    }\n  )\n\n  return () => {\n    mounted = false\n    sub.subscription.unsubscribe()\n  }\n}, [])\n\n  // ---- LOGIN ----\n  const login = async (email: string) => {\n    setError(null)\n    console.log('Login attempt:', email)\n\n    const { data, error } = await supabase.auth.signInWithPassword({\n      email,\n      password,\n    })\n\n    console.log('Login result:', data, error)\n\n    if (error) setError(error.message)\n  }\n\n  // ---- LOGOUT ----\nconst logout = async () => {\n  console.log('Logout clicked')\n\n  const { error } = await supabase.auth.signOut()\n\n  if (error) {\n    console.error('Logout error:', error)\n    return\n  }\n\n  // let the auth listener handle state\n  setUser(null)\n}\n\n\n\n  // ---- LOGGED IN UI ----\n  if (user) {\n    return (\n      <div style={{ padding: 24 }}>\n        <h2>Logged in</h2>\n        <pre>{user.email}</pre>\n\n        <button onClick={logout}>\n          Logout\n        </button>\n\n        {error && <p style={{ color: 'red' }}>{error}</p>}\n      </div>\n    )\n  }\n\n  // ---- LOGIN UI ----\n  return (\n    <div style={{ padding: 24 }}>\n      <h2>Test Login Page</h2>\n\n      {error && <p style={{ color: 'red' }}>{error}</p>}\n\n      <LoginQuick\n        email={email1}\n        setEmail={setEmail1}\n        password={password}\n        setPassword={setPassword}\n        login={login}\n      />\n\n    </div>\n  )\n}\n\n// ---- QUICK LOGIN COMPONENT ----\nexport const LoginQuick = ({\n  email,\n  setEmail,\n  password,\n  setPassword,\n  login,\n}: any) => {\n  return (\n    <div style={{ marginBottom: 24 }}>\n      <input\n        placeholder=\"email\"\n        value={email}\n        onChange={(e) => setEmail(e.target.value)}\n      />\n      <br />\n\n      <input\n        placeholder=\"password\"\n        type=\"password\"\n        value={password}\n        onChange={(e) => setPassword(e.target.value)}\n      />\n      <br />\n\n      <button onClick={() => login(email)}>\n        Login\n      </button>\n    </div>\n  )\n}\n"],"names":["React","SimpleLogin","TestAuth","email1","setEmail1","useState","password","setPassword","user","setUser","error","setError","useEffect","mounted","async","data","supabase","auth","getSession","_data$session$user","_data$session","console","log","session","init","sub","onAuthStateChange","event","_session$user","subscription","unsubscribe","logout","signOut","style","padding","email","onClick","color","LoginQuick","setEmail","login","signInWithPassword","message","_ref","marginBottom","placeholder","value","onChange","e","target","type"],"sourceRoot":""}