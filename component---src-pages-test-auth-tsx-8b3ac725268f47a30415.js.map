{"version":3,"file":"component---src-pages-test-auth-tsx-8b3ac725268f47a30415.js","mappings":"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","sources":["webpack://gatsby-starter-minimal-ts/./src/components/ppm/supabase-react/test-auth/TestAuth.tsx","webpack://gatsby-starter-minimal-ts/./src/pages/test/auth.tsx"],"sourcesContent":["import { useEffect, useState } from 'react'\nimport { supabase } from '../../../../database/supabase'\nimport React from 'react'\n\nexport default function TestAuth() {\n  const [email1, setEmail1] = useState('admin@test.com')\n  const [email2, setEmail2] = useState('editor@test.com')\n  const [email2b, setEmail2b] = useState('editor2@test.com')\n  const [email3, setEmail3] = useState('member@test.com')\n  const [email4, setEmail4] = useState('member2@test.com')\n  const [password, setPassword] = useState('password123')\n  const [user, setUser] = useState<any>(null)\n  const [error, setError] = useState<string | null>(null)\n\n  // ---- AUTH STATE LISTENER ----\nuseEffect(() => {\n  let mounted = true\n\n  const init = async () => {\n    const { data } = await supabase.auth.getSession()\n\n    console.log('Initial session:', data.session)\n\n    if (mounted) {\n      setUser(data.session?.user ?? null)\n    }\n  }\n\n  init()\n\n  const { data: sub } = supabase.auth.onAuthStateChange(\n    (event, session) => {\n      console.log('Auth event:', event)\n\n      if (event === 'SIGNED_OUT') {\n        setUser(null)\n        return\n      }\n\n      setUser(session?.user ?? null)\n    }\n  )\n\n  return () => {\n    mounted = false\n    sub.subscription.unsubscribe()\n  }\n}, [])\n\n  // ---- LOGIN ----\n  const login = async (email: string) => {\n    setError(null)\n    console.log('Login attempt:', email)\n\n    const { data, error } = await supabase.auth.signInWithPassword({\n      email,\n      password,\n    })\n\n    console.log('Login result:', data, error)\n\n    if (error) setError(error.message)\n  }\n\n  // ---- LOGOUT ----\nconst logout = async () => {\n  console.log('Logout clicked')\n\n  const { error } = await supabase.auth.signOut({ scope: 'global' })\n  if (error) {\n    console.error('Logout error:', error)\n  }\n\n  // ðŸ”¥ THIS IS THE MISSING PIECE\n  localStorage.removeItem('sb-' + ((import.meta) as any).env.VITE_SUPABASE_PROJECT_ID + '-auth-token')\n  sessionStorage.clear()\n\n  setUser(null)\n}\n\n\n  // ---- LOGGED IN UI ----\n  if (user) {\n    return (\n      <div style={{ padding: 24 }}>\n        <h2>Logged in</h2>\n        <pre>{user.email}</pre>\n\n        <button onClick={logout}>\n          Logout\n        </button>\n\n        {error && <p style={{ color: 'red' }}>{error}</p>}\n      </div>\n    )\n  }\n\n  // ---- LOGIN UI ----\n  return (\n    <div style={{ padding: 24 }}>\n      <h2>Login</h2>\n\n      {error && <p style={{ color: 'red' }}>{error}</p>}\n\n      <LoginQuick\n        email={email1}\n        setEmail={setEmail1}\n        password={password}\n        setPassword={setPassword}\n        login={login}\n      />\n\n      <LoginQuick\n        email={email2}\n        setEmail={setEmail2}\n        password={password}\n        setPassword={setPassword}\n        login={login}\n      />\n\n      <LoginQuick\n        email={email2b}\n        setEmail={setEmail2b}\n        password={password}\n        setPassword={setPassword}\n        login={login}\n      />\n\n      <LoginQuick\n        email={email3}\n        setEmail={setEmail3}\n        password={password}\n        setPassword={setPassword}\n        login={login}\n      />\n\n      <LoginQuick\n        email={email4}\n        setEmail={setEmail4}\n        password={password}\n        setPassword={setPassword}\n        login={login}\n      />\n    </div>\n  )\n}\n\n// ---- QUICK LOGIN COMPONENT ----\nexport const LoginQuick = ({\n  email,\n  setEmail,\n  password,\n  setPassword,\n  login,\n}: any) => {\n  return (\n    <div style={{ marginBottom: 24 }}>\n      <input\n        placeholder=\"email\"\n        value={email}\n        onChange={(e) => setEmail(e.target.value)}\n      />\n      <br />\n\n      <input\n        placeholder=\"password\"\n        type=\"password\"\n        value={password}\n        onChange={(e) => setPassword(e.target.value)}\n      />\n      <br />\n\n      <button onClick={() => login(email)}>\n        Login\n      </button>\n    </div>\n  )\n}\n","\nimport React from \"react\";\nimport TestAuth from \"../../components/ppm/supabase-react/test-auth/TestAuth\";\nexport default () => <TestAuth/>\n"],"names":["TestAuth","email1","setEmail1","useState","email2","setEmail2","email2b","setEmail2b","email3","setEmail3","email4","setEmail4","password","setPassword","user","setUser","error","setError","useEffect","mounted","async","data","supabase","auth","getSession","_data$session$user","_data$session","console","log","session","init","sub","onAuthStateChange","event","_session$user","subscription","unsubscribe","login","email","signInWithPassword","message","logout","signOut","scope","localStorage","removeItem","import","sessionStorage","clear","React","style","padding","onClick","color","LoginQuick","setEmail","_ref","marginBottom","placeholder","value","onChange","e","target","type"],"sourceRoot":""}