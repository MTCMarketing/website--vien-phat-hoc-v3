"use strict";(self.webpackChunkgatsby_starter_minimal_ts=self.webpackChunkgatsby_starter_minimal_ts||[]).push([[529],{2934:function(e,t,a){a.a(e,async function(e,s){try{a.d(t,{A:function(){return i}});var l=a(6540),n=a(1454),o=e([n]);function i(){const{0:e,1:t}=(0,l.useState)("admin@test.com"),{0:a,1:s}=(0,l.useState)("editor@test.com"),{0:o,1:r}=(0,l.useState)("editor2@test.com"),{0:i,1:u}=(0,l.useState)("member@test.com"),{0:m,1:d}=(0,l.useState)("member2@test.com"),{0:g,1:E}=(0,l.useState)("password123"),{0:p,1:w}=(0,l.useState)(null),{0:h,1:v}=(0,l.useState)(null);(0,l.useEffect)(()=>{let e=!0;(async()=>{const{data:t}=await n.ND.auth.getSession();var a,s;(console.log("Initial session:",t.session),e)&&w(null!==(a=null===(s=t.session)||void 0===s?void 0:s.user)&&void 0!==a?a:null)})();const{data:t}=n.ND.auth.onAuthStateChange((e,t)=>{var a;console.log("Auth event:",e),w("SIGNED_OUT"!==e&&null!==(a=null==t?void 0:t.user)&&void 0!==a?a:null)});return()=>{e=!1,t.subscription.unsubscribe()}},[]);const b=async e=>{v(null),console.log("Login attempt:",e);const{data:t,error:a}=await n.ND.auth.signInWithPassword({email:e,password:g});console.log("Login result:",t,a),a&&v(a.message)},y=async()=>{console.log("Logout clicked");const{error:e}=await n.ND.auth.signOut({scope:"global"});e&&console.error("Logout error:",e),localStorage.removeItem("sb-"+(void 0).VITE_SUPABASE_PROJECT_ID+"-auth-token"),sessionStorage.clear(),w(null)};return p?l.createElement("div",{style:{padding:24}},l.createElement("h2",null,"Logged in"),l.createElement("pre",null,p.email),l.createElement("button",{onClick:y},"Logout"),h&&l.createElement("p",{style:{color:"red"}},h)):l.createElement("div",{style:{padding:24}},l.createElement("h2",null,"Login"),h&&l.createElement("p",{style:{color:"red"}},h),l.createElement(c,{email:e,setEmail:t,password:g,setPassword:E,login:b}),l.createElement(c,{email:a,setEmail:s,password:g,setPassword:E,login:b}),l.createElement(c,{email:o,setEmail:r,password:g,setPassword:E,login:b}),l.createElement(c,{email:i,setEmail:u,password:g,setPassword:E,login:b}),l.createElement(c,{email:m,setEmail:d,password:g,setPassword:E,login:b}))}n=(o.then?(await o)():o)[0];const c=e=>{let{email:t,setEmail:a,password:s,setPassword:n,login:o}=e;return l.createElement("div",{style:{marginBottom:24}},l.createElement("input",{placeholder:"email",value:t,onChange:e=>a(e.target.value)}),l.createElement("br",null),l.createElement("input",{placeholder:"password",type:"password",value:s,onChange:e=>n(e.target.value)}),l.createElement("br",null),l.createElement("button",{onClick:()=>o(t)},"Login"))};s()}catch(r){s(r)}})},5758:function(e,t,a){a.a(e,async function(e,s){try{a.r(t);var l=a(6540),n=a(2934),o=e([n]);n=(o.then?(await o)():o)[0],t.default=()=>l.createElement(n.A,null),s()}catch(r){s(r)}})}}]);
//# sourceMappingURL=component---src-pages-test-auth-tsx-8b3ac725268f47a30415.js.map