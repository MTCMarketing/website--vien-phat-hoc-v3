"use strict";(self.webpackChunkgatsby_starter_minimal_ts=self.webpackChunkgatsby_starter_minimal_ts||[]).push([[759],{1893:function(e,t,n){n.a(e,async function(e,a){try{n.r(t);var l=n(6540),s=n(9547),o=e([s]);s=(o.then?(await o)():o)[0],t.default=()=>l.createElement(s.A,null),a()}catch(r){a(r)}})},9547:function(e,t,n){n.a(e,async function(e,a){try{n.d(t,{A:function(){return u}});var l=n(6540),s=n(1454),o=e([s]);function u(){const{0:e,1:t}=(0,l.useState)(""),{0:n,1:a}=(0,l.useState)(""),{0:o,1:r}=(0,l.useState)(null),{0:u,1:i}=(0,l.useState)(null);(0,l.useEffect)(()=>{let e=!0;(async()=>{const{data:t}=await s.ND.auth.getSession();var n,a;(console.log("Initial session:",t.session),e)&&r(null!==(n=null===(a=t.session)||void 0===a?void 0:a.user)&&void 0!==n?n:null)})();const{data:t}=s.ND.auth.onAuthStateChange((e,t)=>{var n;console.log("Auth event:",e),r("SIGNED_OUT"!==e&&null!==(n=null==t?void 0:t.user)&&void 0!==n?n:null)});return()=>{e=!1,t.subscription.unsubscribe()}},[]);const d=async()=>{console.log("Logout clicked");const{error:e}=await s.ND.auth.signOut();e?console.error("Logout error:",e):r(null)};return o?l.createElement("div",{style:{padding:24}},l.createElement("h2",null,"Logged in"),l.createElement("pre",null,o.email),l.createElement("button",{onClick:d},"Logout"),u&&l.createElement("p",{style:{color:"red"}},u)):l.createElement("div",{style:{padding:24}},l.createElement("h2",null,"Test Login Page"),u&&l.createElement("p",{style:{color:"red"}},u),l.createElement(c,{email:e,setEmail:t,password:n,setPassword:a,login:async e=>{i(null),console.log("Login attempt:",e);const{data:t,error:a}=await s.ND.auth.signInWithPassword({email:e,password:n});console.log("Login result:",t,a),a&&i(a.message)}}))}s=(o.then?(await o)():o)[0];const c=e=>{let{email:t,setEmail:n,password:a,setPassword:s,login:o}=e;return l.createElement("div",{style:{marginBottom:24}},l.createElement("input",{placeholder:"email",value:t,onChange:e=>n(e.target.value)}),l.createElement("br",null),l.createElement("input",{placeholder:"password",type:"password",value:a,onChange:e=>s(e.target.value)}),l.createElement("br",null),l.createElement("button",{onClick:()=>o(t)},"Login"))};a()}catch(r){a(r)}})}}]);
//# sourceMappingURL=component---src-pages-test-login-tsx-c296dd633f3f16fe0a57.js.map