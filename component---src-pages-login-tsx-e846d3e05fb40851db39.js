"use strict";(self.webpackChunkgatsby_starter_minimal_ts=self.webpackChunkgatsby_starter_minimal_ts||[]).push([[626],{682:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Y:function(){return useUniversalRouter}});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6540);function useUniversalRouter(){const routesRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),gatsbyNavigateRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),initializedRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(!1);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{initializedRef.current||"undefined"==typeof window||(initializedRef.current=!0,(async()=>{try{const gatsbyModuleName="gatsby",gatsby=await eval("import("+JSON.stringify(gatsbyModuleName)+")");if("function"==typeof gatsby.navigate)return void(gatsbyNavigateRef.current=gatsby.navigate)}catch(_unused){}const isVite="undefined"!=typeof window&&!!window.__vite_plugin_react_preamble_installed__;if(isVite)try{const virtualName="virtual:generated-pages-react",mod=await eval("import("+JSON.stringify(virtualName)+")");routesRef.current=mod.default}catch(_unused2){}})())},[]);const go=e=>{gatsbyNavigateRef.current?gatsbyNavigateRef.current(e):window.location.assign(e)},getRoutes=()=>routesRef.current;return{go:go,getRoutes:getRoutes}}},3652:function(e,t,a){a.a(e,async function(e,n){try{a.r(t);var r=a(6540),s=a(8993),l=a(1454),o=a(682),i=a(7774),c=e([l,i]);[l,i]=c.then?(await c)():c;const u=()=>{const{0:e,1:t}=(0,r.useState)(""),{0:a,1:n}=(0,r.useState)(""),{0:c,1:u}=(0,r.useState)(!1),{0:m,1:d}=(0,r.useState)(null),{go:g}=(0,o.Y)(),{isLoggedIn:_,loading:f}=(0,i.D)();(0,r.useEffect)(()=>{!f&&_&&(console.log("[Auth] Already logged in → redirecting to /cms"),g("/cms"))},[f,_]);return r.createElement(s.A,{email:e,password:a,onEmailChange:t,onPasswordChange:n,onSubmit:async t=>{t.preventDefault(),u(!0),d(null),console.log("[Auth] Attempting login with:",e);try{const{data:t,error:n}=await l.ND.auth.signInWithPassword({email:e,password:a});if(console.log("[Auth] Supabase result:",t,n),n)return void d(n.message);console.log("[Auth] Login successful via Supabase"),g("/cms")}catch(n){console.error("[Auth] Unexpected error:",n),d("Something broke in Supabase. Check console.")}finally{u(!1)}},loading:c,error:m})};t.default=u,n()}catch(u){n(u)}})},7774:function(e,t,a){a.a(e,async function(e,n){try{a.d(t,{D:function(){return i}});var r=a(6540),s=a(1454),l=e([s]);function i(){const{0:e,1:t}=(0,r.useState)(!1),{0:a,1:n}=(0,r.useState)(!0);return(0,r.useEffect)(()=>{let e=!0;(async()=>{const{data:a}=await s.ND.auth.getSession();e&&(t(!!a.session),n(!1))})();const{data:a}=s.ND.auth.onAuthStateChange((a,n)=>{e&&t(!!n)});return()=>{e=!1,a.subscription.unsubscribe()}},[]),{isLoggedIn:e,loading:a}}s=(l.then?(await l)():l)[0],n()}catch(o){n(o)}})},8993:function(e,t,a){var n=a(6540);t.A=e=>{let{email:t,password:a,onEmailChange:r,onPasswordChange:s,onSubmit:l,loading:o,error:i}=e;return n.createElement("div",{className:"login-wrapper"},n.createElement("div",{className:"login-card"},n.createElement("div",{className:"login-header"},n.createElement("div",{className:"login-logo"},n.createElement("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"},n.createElement("path",{d:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"}))),n.createElement("h1",{className:"login-title"},"Admin Portal"),n.createElement("p",{className:"login-subtitle"},"Please enter your credentials to log in.")),i&&n.createElement("div",{className:"login-error"},n.createElement("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},n.createElement("circle",{cx:"12",cy:"12",r:"10"}),n.createElement("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),n.createElement("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})),i),n.createElement("form",{onSubmit:l,className:"login-form"},n.createElement("div",{className:"form-group"},n.createElement("label",{className:"form-label"},"Email Address"),n.createElement("div",{className:"input-container"},n.createElement("input",{type:"email",className:"login-input",placeholder:"admin@example.com",value:t,onChange:e=>r(e.target.value),disabled:o,required:!0}))),n.createElement("div",{className:"form-group"},n.createElement("label",{className:"form-label"},"Password"),n.createElement("div",{className:"input-container"},n.createElement("input",{type:"password",className:"login-input",placeholder:"••••••••",value:a,onChange:e=>s(e.target.value),disabled:o,required:!0}))),n.createElement("div",{className:"forgot-password"},n.createElement("a",{href:"/reset-password",className:"forgot-password-link"},"Forgot password?")),n.createElement("button",{type:"submit",className:"login-button",disabled:o},o?n.createElement("div",{className:"loading-dots"},n.createElement("span",null),n.createElement("span",null),n.createElement("span",null)):"Log In")),n.createElement("div",{className:"login-footer"},n.createElement("p",null,"© 2026 CMS Admin. All rights reserved."))))}}}]);
//# sourceMappingURL=component---src-pages-login-tsx-e846d3e05fb40851db39.js.map