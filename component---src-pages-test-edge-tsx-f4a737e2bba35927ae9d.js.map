{"version":3,"file":"component---src-pages-test-edge-tsx-f4a737e2bba35927ae9d.js","mappings":"gQAMA,MAAMA,EAAiB,I,6BAAKC,GAEtBC,GAAWC,EAAAA,EAAAA,IAAaC,EAAAA,GAAcC,EAAAA,IAEtCC,EAAOC,GACXC,EAAAA,cAAA,OACEC,MAAO,CACLC,WAAY,UACZC,MAAO,UACPC,QAAS,GACTC,aAAc,EACdC,OAAQ,oBACRC,WAAY,mCACZC,aAAc,GACdC,WAAY,aAGbV,GAIU,SAASW,IACtB,MAAM,EAACC,EAAI,EAAEC,IAAWC,EAAAA,EAAAA,UAAS,UAC3B,EAACC,EAAM,EAAEC,IAAaF,EAAAA,EAAAA,UAAwB,OAC9C,EAACG,EAAQ,EAAEC,IAAeJ,EAAAA,EAAAA,UAAc,OACxC,EAACK,EAAY,EAAEC,IAAmBN,EAAAA,EAAAA,UAAwB,MA4ChE,OACEb,EAAAA,cAAA,OACEC,MAAO,CACLM,WACE,gEACFH,QAAS,GACTF,WAAY,UACZC,MAAO,UACPiB,UAAW,UAGbpB,EAAAA,cAAA,MAAIC,MAAO,CAAEE,MAAO,YAAa,+BAEhCL,EACCE,EAAAA,cAAAA,EAAAA,SAAA,KACEA,EAAAA,cAAA,cAAQ,mBACRA,EAAAA,cAAA,WACAA,EAAAA,cAAA,SACEqB,MAAOV,EACPW,SAAWC,GAAMX,EAAQW,EAAEC,OAAOH,OAClCpB,MAAO,CACLwB,UAAW,EACXrB,QAAS,EACTsB,MAAO,IACPxB,WAAY,UACZC,MAAO,UACPG,OAAQ,oBACRD,aAAc,OAMrBP,EACCE,EAAAA,cAAAA,EAAAA,SAAA,KACEA,EAAAA,cAAA,cAAQ,8BACRA,EAAAA,cAAA,WACAA,EAAAA,cAAA,UACE2B,QAhFVC,iBAA0B,IAAAC,EACxBd,EAAU,sBAEV,MAAQe,KAAMC,SAAsBrC,EAASsC,KAAKC,aAC5CC,EAAQH,SAAoB,QAATF,EAAXE,EAAaI,eAAO,IAAAN,OAAT,EAAXA,EAAsBO,aAGpC,GADAC,QAAQC,IAAIJ,GACPA,EAAL,CAMAf,EAAgBe,EAAMK,MAAM,EAAG,IAAM,OAErC,IACExB,EAAU,4BAEV,MAAMyB,QAAYC,MAAMjD,EAAmB,CACzCkD,OAAQ,OACRC,QAAS,CACP,eAAgB,mBAChBC,cAAe,UAAUV,GAE3BW,KAAMC,KAAKC,UAAU,CAAEpC,WAGnBqC,QAAaR,EAAIQ,OAEvB/B,EAAY+B,GAEPR,EAAIS,GAGPlC,EAAU,sCAFVA,EAAU,qBAAqByB,EAAI1B,OAAM,IAI7C,CAAE,MAAOoC,GACPnC,EAAU,oBACVE,EAAY,CAAEkC,MAAOC,OAAOF,IAC9B,CA7BA,MAFEnC,EAAU,uCAgCd,EAyCUd,MAAO,CACLwB,UAAW,EACXrB,QAAS,WACTF,WAAY,UACZC,MAAO,UACPG,OAAQ,OACRD,aAAc,EACdgD,WAAY,MAEf,sBAMJvC,GACChB,EACEE,EAAAA,cAAAA,EAAAA,SAAA,KACEA,EAAAA,cAAA,cAAQ,WACRA,EAAAA,cAAA,WACCc,IAINI,GACCpB,EACEE,EAAAA,cAAAA,EAAAA,SAAA,KACEA,EAAAA,cAAA,cAAQ,8BACRA,EAAAA,cAAA,WACCkB,IAINF,GACClB,EACEE,EAAAA,cAAAA,EAAAA,SAAA,KACEA,EAAAA,cAAA,cAAQ,kBACRA,EAAAA,cAAA,WACC8C,KAAKC,UAAU/B,EAAU,KAAM,KAK5C,C","sources":["webpack://gatsby-starter-minimal-ts/./src/pages/test/edge.tsx"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\nimport { SUPABASE_URL, SUPABASE_ANON_KEY, SUPABASE_EDGE_BASE_URL } from \"../../database/supabase\";\nimport { useState } from \"react\";\nimport React from \"react\";\n\n// === YOU MUST CHANGE THESE ===\nconst EDGE_FUNCTION_URL =`${SUPABASE_EDGE_BASE_URL}`\n\nconst supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);\n\nconst box = (children: React.ReactNode) => (\n  <div\n    style={{\n      background: \"#0f172a\",\n      color: \"#e5e7eb\",\n      padding: 16,\n      borderRadius: 8,\n      border: \"1px solid #334155\",\n      fontFamily: \"JetBrains Mono, Menlo, monospace\",\n      marginBottom: 16,\n      whiteSpace: \"pre-wrap\",\n    }}\n  >\n    {children}\n  </div>\n);\n\nexport default function AdminEdgeTest() {\n  const [name, setName] = useState(\"Abdul\");\n  const [status, setStatus] = useState<string | null>(null);\n  const [response, setResponse] = useState<any>(null);\n  const [tokenPreview, setTokenPreview] = useState<string | null>(null);\n\n  async function callEdge() {\n    setStatus(\"Getting session...\");\n\n    const { data: sessionData } = await supabase.auth.getSession();\n    const token = sessionData?.session?.access_token;\n\n    console.log(token)\n    if (!token) {\n      setStatus(\"‚ùå NOT LOGGED IN ‚Äî no token available\");\n      return;\n    }\n\n    // show a tiny preview so you know something real is happening\n    setTokenPreview(token.slice(0, 40) + \"...\");\n\n    try {\n      setStatus(\"Calling Edge Function...\");\n\n      const res = await fetch(EDGE_FUNCTION_URL, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify({ name }),\n      });\n\n      const json = await res.json();\n\n      setResponse(json);\n\n      if (!res.ok) {\n        setStatus(`‚ùå BLOCKED (status ${res.status})`);\n      } else {\n        setStatus(\"‚úÖ SUCCESS ‚Äî admin access confirmed\");\n      }\n    } catch (err: any) {\n      setStatus(\"üí• NETWORK ERROR\");\n      setResponse({ error: String(err) });\n    }\n  }\n\n  return (\n    <div\n      style={{\n        fontFamily:\n          \"Inter, -apple-system, system-ui, Segoe UI, Roboto, sans-serif\",\n        padding: 32,\n        background: \"#0b1220\",\n        color: \"#e5e7eb\",\n        minHeight: \"100vh\",\n      }}\n    >\n      <h1 style={{ color: \"#facc15\" }}>üß™ Supabase Admin Edge Test</h1>\n\n      {box(\n        <>\n          <strong>1) Enter a name</strong>\n          <br />\n          <input\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n            style={{\n              marginTop: 8,\n              padding: 8,\n              width: 300,\n              background: \"#020617\",\n              color: \"#e5e7eb\",\n              border: \"1px solid #334155\",\n              borderRadius: 6,\n            }}\n          />\n        </>\n      )}\n\n      {box(\n        <>\n          <strong>2) Call your Edge Function</strong>\n          <br />\n          <button\n            onClick={callEdge}\n            style={{\n              marginTop: 8,\n              padding: \"8px 12px\",\n              background: \"#facc15\",\n              color: \"#020617\",\n              border: \"none\",\n              borderRadius: 6,\n              fontWeight: 600,\n            }}\n          >\n            CALL HELLO-ADMIN\n          </button>\n        </>\n      )}\n\n      {status &&\n        box(\n          <>\n            <strong>Status:</strong>\n            <br />\n            {status}\n          </>\n        )}\n\n      {tokenPreview &&\n        box(\n          <>\n            <strong>JWT Preview (client side):</strong>\n            <br />\n            {tokenPreview}\n          </>\n        )}\n\n      {response &&\n        box(\n          <>\n            <strong>Edge Response:</strong>\n            <br />\n            {JSON.stringify(response, null, 2)}\n          </>\n        )}\n    </div>\n  );\n}"],"names":["EDGE_FUNCTION_URL","SUPABASE_EDGE_BASE_URL","supabase","createClient","SUPABASE_URL","SUPABASE_ANON_KEY","box","children","React","style","background","color","padding","borderRadius","border","fontFamily","marginBottom","whiteSpace","AdminEdgeTest","name","setName","useState","status","setStatus","response","setResponse","tokenPreview","setTokenPreview","minHeight","value","onChange","e","target","marginTop","width","onClick","async","_sessionData$session","data","sessionData","auth","getSession","token","session","access_token","console","log","slice","res","fetch","method","headers","Authorization","body","JSON","stringify","json","ok","err","error","String","fontWeight"],"sourceRoot":""}